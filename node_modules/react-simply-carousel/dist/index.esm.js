import e,{memo as t,useState as n,useRef as r,Children as i,useCallback as o,useEffect as c}from"react";function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],c=!0,d=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(e){d=!0,i=e}finally{try{c||null==n.return||n.return()}finally{if(d)throw i}}return o}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=["responsiveProps"],b=["minWidth","maxWidth"],y=["style","onClickCapture"],w=["style"],x=["style","onTouchStart","onMouseDown","onTransitionEnd"],g=["children","show"],S=["children","show"],E=["className","style"],I=["className","style"],T=["className","onClick","style"],O=["props"];function C(t){var d=t.responsiveProps,l=void 0===d?[]:d,m=s(t,p),h=f(n(0),2),C=h[0],L=h[1],k=f(n(m.activeSlideIndex),2),M=k[0],P=k[1],j=r(null),W=r(null),A=r(null),X=r(0),N=r(!1),D=r(""),F=r(null),V=r(null),z=r(0),B=r(M),q=l.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minWidth,r=void 0===n?0:n,i=t.maxWidth,o=void 0===i?null:i,c=s(t,b);return C>r&&(!o||C<=o)?a(a({},e),c):e}),m),H=i.toArray(q.children),R=C?a(a({},q),{},{activeSlideIndex:Math.max(0,Math.min(q.activeSlideIndex,H.length-1)),itemsToShow:Math.min(H.length,q.itemsToShow||0),itemsToScroll:Math.min(H.length,q.itemsToScroll||1)}):m,U=R.containerProps,$=(U=void 0===U?{}:U).style,G=void 0===$?{}:$,J=U.onClickCapture,K=void 0===J?null:J,Q=s(U,y),Y=R.innerProps,Z=(Y=void 0===Y?{}:Y).style,_=void 0===Z?{}:Z,ee=s(Y,w),te=R.itemsListProps,ne=(te=void 0===te?{}:te).style,re=void 0===ne?{}:ne,ie=te.onTouchStart,oe=void 0===ie?null:ie,ce=te.onMouseDown,de=void 0===ce?null:ce,ae=te.onTransitionEnd,le=void 0===ae?null:ae,ue=s(te,x),se=R.backwardBtnProps,fe=(se=void 0===se?{}:se).children,ve=void 0===fe?null:fe,me=se.show,he=void 0===me||me,pe=s(se,g),be=R.forwardBtnProps,ye=(be=void 0===be?{}:be).children,we=void 0===ye?null:ye,xe=be.show,ge=void 0===xe||xe,Se=s(be,S),Ee=R.activeSlideProps,Ie=(Ee=void 0===Ee?{}:Ee).className,Te=void 0===Ie?"":Ie,Oe=Ee.style,Ce=void 0===Oe?{}:Oe,Le=s(Ee,E),ke=R.visibleSlideProps,Me=(ke=void 0===ke?{}:ke).className,Pe=void 0===Me?"":Me,je=ke.style,We=void 0===je?{}:je,Ae=s(ke,I),Xe=R.updateOnItemClick,Ne=void 0!==Xe&&Xe,De=R.activeSlideIndex,Fe=R.onRequestChange,Ve=R.speed,ze=void 0===Ve?0:Ve,Be=R.delay,qe=void 0===Be?0:Be,He=R.easing,Re=void 0===He?"linear":He,Ue=R.itemsToShow,$e=void 0===Ue?0:Ue,Ge=R.itemsToScroll,Je=void 0===Ge?1:Ge,Ke=R.children,Qe=R.onAfterChange,Ye=R.autoplay,Ze=void 0!==Ye&&Ye,_e=R.autoplayDirection,et=void 0===_e?"forward":_e,tt=R.disableNavIfAllVisible,nt=void 0===tt||tt,rt=R.hideNavIfAllVisible,it=void 0===rt||rt,ot=R.centerMode,ct=void 0!==ot&&ot,dt=R.infinite,at=void 0===dt||dt,lt=R.disableNavIfEdgeVisible,ut=void 0===lt||lt,st=R.disableNavIfEdgeActive,ft=void 0===st||st,vt=R.dotsNav,mt=void 0===vt?{}:vt,ht=R.persistentChangeCallbacks,pt=void 0!==ht&&ht,bt=R.autoplayDelay,yt=void 0===bt?0:bt,wt=mt||{},xt=wt.show,gt=void 0!==xt&&xt,St=wt.containerProps,Et=void 0===St?{}:St,It=wt.itemBtnProps,Tt=void 0===It?{}:It,Ot=wt.activeItemBtnProps,Ct=void 0===Ot?{}:Ot,Lt=i.count(Ke)-1,kt=$e===H.length,Mt=it&&kt,Pt=nt&&kt,jt=De-M==0||!ze&&!qe?"none":"transform ".concat(ze,"ms ").concat(Re," ").concat(qe,"ms"),Wt=o((function(e){var t=e.correctionSlideIndex,n=e.prevCorrectionSlideIndex,r=e.curActiveSlideIndex,i=A.current.offsetWidth,o=A.current.children,c=o.length,d=at?v(o).slice(c/3-n,c/3-n+c/3):v(o),a=d[r].offsetWidth,l=$e?d.reduce((function(e,t,n){return n>=r&&n<r+$e||n<r&&n<r+$e-d.length?e+t.offsetWidth:e}),0):W.current.offsetWidth,u=i-l,s=ct&&at?-(l-a)/2:0,f=at?i/3:0,m=t-r==0?0:"forward"===D.current&&r<t?f:"backward"===D.current&&r>t?-f:0,h=r-t!=0,p=function(e){var t=d.reduce((function(t,n,r){return r>=e?t:t+(n.offsetWidth||0)}),0);return at?t:Math.min(u,t)},b=h&&at?p(t):0,y=h||!at?p(r):0,w=Pt?0:y-b+s+m+f,x="translateX(-".concat(w,"px)"),g=at?f+s:Math.min(u,d.reduce((function(e,t,n){return n<r?e+t.offsetWidth:e}),0)),S=g+l,E=d.map((function(e,t){return{slideIndex:t,htmlElement:e}})),I=at?[].concat(v(d.slice(r).map((function(e,t){return{slideIndex:t+r,htmlElement:e}}))),v(E),v(E),v(d.slice(0,r).map((function(e,t){return{slideIndex:t,htmlElement:e}})))):E,T=I.reduce((function(e,t){var n=t.slideIndex,r=t.htmlElement.offsetWidth;return(e.summ>=g&&e.summ<S||e.summ+r>g&&e.summ+r<=S)&&e.items.push({slideIndex:n,isFullyVisible:e.summ+r<=S&&e.summ>=g}),e.summ+=r,e}),{summ:0,items:[]}),O=!!T.items.find((function(e){return 0===e.slideIndex})),C=!!T.items.find((function(e){return e.slideIndex===d.length-1}));return{slidesHTMLElements:d,innerMaxWidth:l,itemsListMaxTranslateX:u,activeSlideWidth:a,offsetCorrectionForCenterMode:s,offsetCorrectionForInfiniteMode:f,itemsListTranslateX:w,itemsListTransform:x,visibleSlides:T.items,isFirstSlideVisible:O,isLastSlideVisible:C}}),[ct,Pt,at,$e]),At=C?Wt({prevCorrectionSlideIndex:B.current,curActiveSlideIndex:De,correctionSlideIndex:M}):{},Xt=At.innerMaxWidth,Nt=void 0===Xt?0:Xt,Dt=At.itemsListMaxTranslateX,Ft=void 0===Dt?0:Dt,Vt=At.activeSlideWidth,zt=void 0===Vt?0:Vt,Bt=At.offsetCorrectionForCenterMode,qt=void 0===Bt?0:Bt,Ht=At.offsetCorrectionForInfiniteMode,Rt=void 0===Ht?0:Ht,Ut=At.itemsListTranslateX,$t=void 0===Ut?0:Ut,Gt=At.itemsListTransform,Jt=void 0===Gt?"none":Gt,Kt=At.visibleSlides,Qt=void 0===Kt?[]:Kt,Yt=o((function(e){if("forward"===e){var t=De+Je;return t>Lt?at?t-Lt-1:De:t}if("backward"===e){var n=De-Je;return n<0?at?Lt+1+n:De:n}return De}),[De,Je,Lt,at]),Zt=o((function(e,t){if(D.current=t,A.current.style.transition=ze||qe?"transform ".concat(ze,"ms ").concat(Re," ").concat(qe,"ms"):"none",e!==De||pt){clearTimeout(F.current);var n=Wt({correctionSlideIndex:M,prevCorrectionSlideIndex:M,curActiveSlideIndex:e}),r=n.visibleSlides,i=n.isFirstSlideVisible,o=n.isLastSlideVisible;Fe(e,{visibleSlides:r,isFirstSlideVisible:i,isLastSlideVisible:o})}else X.current=0,A.current.style.transform="translateX(-".concat(qt+Rt+(at?0:$t),"px)")}),[pt,De,qt,qe,Re,ze,Fe,Rt,at,$t,M,Wt]),_t=o((function(){Ze&&(clearTimeout(F.current),F.current=setTimeout((function(){Zt(Yt(et),et)}),yt||qe))}),[Ze,et,yt,Zt,Yt,qe]),en=o((function(e){N.current&&(e.preventDefault(),e.stopPropagation(),K&&K(e))}),[K]),tn=o((function(){Zt(Yt("backward"),"backward")}),[Zt,Yt]),nn=o((function(e){N.current=!0;var t=e.touches&&e.touches[0]?e.touches[0].clientX:e.clientX,n=X.current-t+qt+Rt+(at?0:$t),r=A.current.offsetWidth-W.current.offsetWidth,i=Math.max(Math.min(0,-n),-r);A.current.style.transition="none",A.current.style.transform="translateX(".concat(i,"px)")}),[qt,Rt,at,$t]),rn=o((function(e){if(A.current.removeEventListener("mouseout",rn),A.current.removeEventListener("dragstart",rn),document.removeEventListener("mousemove",nn),document.removeEventListener("mouseup",rn),document.removeEventListener("touchmove",nn),document.removeEventListener("touchend",rn),N.current){var t=e.changedTouches&&e.changedTouches.length?e.changedTouches[e.changedTouches.length-1].clientX:e.clientX,n=X.current-t,r=n>zt/2?{index:Yt("forward"),direction:"forward"}:n<-zt/2?{index:Yt("backward"),direction:"backward"}:{index:De,direction:"forward"};r.index===De&&(N.current=!1),Zt(r.index,r.direction)}}),[De,zt,Zt,Yt,nn]),on=o((function(e){clearTimeout(F.current),N.current||(X.current=e.clientX,document.addEventListener("mousemove",nn),document.addEventListener("mouseup",rn),A.current.addEventListener("mouseout",rn),A.current.addEventListener("dragstart",rn)),de&&de(e)}),[nn,rn,de]),cn=o((function(e){clearTimeout(F.current),N.current||(X.current=e.touches[0].clientX,document.addEventListener("touchmove",nn),document.addEventListener("touchend",rn)),oe&&oe(e)}),[nn,rn,oe]),dn=o((function(e){P(De),le&&le(e)}),[De,le]),an=o((function(){Zt(Yt("forward"),"forward")}),[Zt,Yt]),ln=function(e,t,n){return e.map((function(e,r){var i=e.props,o=(i=void 0===i?{}:i).className,c=void 0===o?"":o,d=i.onClick,l=void 0===d?null:d,u=i.style,f=void 0===u?{}:u,v=s(i,T),m=s(e,O),h=at?z.current>=H.length?"forward":"backward":r>=De?"forward":"backward",p=r+t===De,b=Qt.find((function(e){return e.slideIndex===r+t})),y="".concat(c," ").concat(h," ").concat(p?Te:""," ").concat(b?Pe:""),w=a(a(a(a({},f),b?We:{}),p?Ce:{}),{},{boxSizing:"border-box",margin:0}),x=!n&&Ne?function(e){var t=e.direction,n=e.index,r=e.onClick;return function(e){Zt(n,t||(De<n?"forward":"")||(De>n?"backward":"")),r&&r(e)}}({direction:h,index:r+t,onClick:l}):l,g=a(a(a({role:"tabpanel",className:y,style:w,onClick:x},v),b?Ae:{}),p?Le:{});return z.current+=1,a({props:g},m)}))};return c((function(){return X.current=0,M===De&&(N.current=!1),D.current="",De!==M?ze||qe||P(De):(Qe&&Qe(De,M),(at||"forward"===et&&De!==Lt||"backward"===et&&0!==De)&&_t()),function(){clearTimeout(F.current)}}),[M,De,Qe,ze,qe,_t,at,Lt,et]),c((function(){return C&&_t(),function(){clearTimeout(F.current)}}),[C]),c((function(){var e=A.current;function t(){clearTimeout(V.current),clearTimeout(F.current),V.current=setTimeout((function(){C!==window.innerWidth&&L(window.innerWidth)}),400)}return C!==window.innerWidth&&L(window.innerWidth),window.addEventListener("resize",t),function(){clearTimeout(V.current),window.removeEventListener("resize",t),document.removeEventListener("mousemove",nn),document.removeEventListener("mouseup",rn),document.removeEventListener("touchmove",nn),document.removeEventListener("touchend",rn),e.removeEventListener("mouseout",rn),e.removeEventListener("dragstart",rn)}}),[nn,rn]),z.current=0,B.current=M,e.createElement("div",u({onClickCapture:en,style:a({display:"flex",flexFlow:"row wrap",boxSizing:"border-box",justifyContent:"center",width:"100%"},G)},Q,{ref:j}),he&&!Mt&&e.createElement("button",u({},pe,{type:"button",onClick:(0===$t&&ut||0===De&&ft)&&!at?void 0:tn,disabled:"boolean"==typeof pe.disabled?pe.disabled:!(!(0===$t&&ut||0===De&&ft)||at)}),ve),e.createElement("div",u({},ee,{style:a(a({},_),{},{display:"flex",boxSizing:"border-box",flexFlow:"row wrap",padding:"0",overflow:"hidden",maxWidth:Nt?"".concat(Nt,"px"):void 0,flex:Nt?void 0:"1 0"}),ref:W}),e.createElement("div",u({},ue,{style:a(a({},re),{},{display:"flex",boxSizing:"border-box",outline:"none",transition:jt,transform:Jt}),onTouchStart:Pt?void 0:cn,onMouseDown:Pt?void 0:on,onTransitionEnd:ze||qe?dn:void 0,tabIndex:-1,role:"presentation",ref:A}),at&&ln(H.slice(M),M,Pt),ln(H,0,Pt),at&&ln(H,0,Pt),at&&ln(H.slice(0,M),0,Pt))),ge&&!Mt&&e.createElement("button",u({},Se,{type:"button",onClick:($t===Ft&&ut||De===Lt&&ft)&&!at?void 0:an,disabled:"boolean"==typeof Se.disabled?Se.disabled:!(!($t===Ft&&ut||De===Lt&&ft)||at)}),we),!!gt&&e.createElement("div",u({style:{width:"100%",display:"flex",justifyContent:"center"}},Et),Array.from({length:Math.ceil(H.length/Je)}).map((function(t,n){return e.createElement("button",u({type:"button",key:n,title:"".concat(n)},Tt,Math.min(n*Je,H.length-1)===De?Ct:{},{onClick:function(){Zt(Math.min(n*Je,H.length-1),Math.min(n*Je,H.length-1)>De?"forward":"backward")}}))}))))}var L=t(C);export{L as default};
